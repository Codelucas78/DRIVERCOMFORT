<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöó Transporte Premium - Lucas Santos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #312e81 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        .glass {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .star {
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }

        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 25px rgba(147, 51, 234, 0.6); }
            50% { box-shadow: 0 0 45px rgba(219, 39, 119, 0.9); }
        }

        #chatMessages {
            max-height: 400px;
            overflow-y: auto;
        }

        #chatMessages::-webkit-scrollbar {
            width: 8px;
        }

        #chatMessages::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        #chatMessages::-webkit-scrollbar-thumb {
            background: rgba(147, 51, 234, 0.6);
            border-radius: 10px;
        }

        .suggestion-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }

        .suggestion-item {
            transition: all 0.2s ease;
        }

        .loading-pulse {
            animation: loading-pulse 1.5s ease-in-out infinite;
        }

        @keyframes loading-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .modal-overlay {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    
    <!-- Modal de Identifica√ß√£o -->
    <div id="identificacaoModal" class="fixed inset-0 bg-black/95 backdrop-blur-md flex items-center justify-center z-50 p-4 modal-overlay">
        <div class="glass p-8 rounded-3xl max-w-md w-full border-2 border-purple-500/50 shadow-2xl">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4 animate-float">üöó</div>
                <h2 class="text-3xl font-bold text-white mb-2">Bem-vindo!</h2>
                <p class="text-gray-300 text-lg">Identifique-se para continuar</p>
            </div>

            <div class="space-y-4">
                <input 
                    type="text" 
                    id="nomeIdentificacao" 
                    placeholder="Nome completo *"
                    class="w-full px-4 py-4 bg-slate-800/90 border-2 border-purple-500/30 text-white placeholder-gray-400 rounded-xl focus:border-purple-500 focus:outline-none transition-all text-lg"
                >
                <input 
                    type="text" 
                    id="cpfIdentificacao" 
                    placeholder="CPF *"
                    maxlength="14"
                    class="w-full px-4 py-4 bg-slate-800/90 border-2 border-purple-500/30 text-white placeholder-gray-400 rounded-xl focus:border-purple-500 focus:outline-none transition-all text-lg"
                >
                <input 
                    type="text" 
                    id="telefoneIdentificacao" 
                    placeholder="Telefone (com DDD) *"
                    maxlength="15"
                    class="w-full px-4 py-4 bg-slate-800/90 border-2 border-purple-500/30 text-white placeholder-gray-400 rounded-xl focus:border-purple-500 focus:outline-none transition-all text-lg"
                >
                <button 
                    onclick="entrarNoSite()" 
                    class="w-full px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white text-lg font-bold rounded-xl transition-all duration-300 shadow-lg pulse-glow"
                >
                    ‚úÖ Entrar no Site
                </button>
            </div>

            <p class="text-xs text-gray-400 text-center mt-4">
                üîí Seus dados s√£o seguros e usados apenas para registro de visita
            </p>
        </div>
    </div>

    <!-- Modal de Turismo -->
    <div id="turismoModal" class="hidden fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4">
        <div class="glass p-8 rounded-3xl max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-cyan-500/50">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-4xl font-bold text-white">üèñÔ∏è Pacotes de Turismo Premium</h2>
                <button onclick="toggleTurismo()" class="text-white text-3xl hover:text-red-400 transition-colors">
                    ‚úñÔ∏è
                </button>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="pacotesTurismo">
                <!-- Os pacotes ser√£o carregados dinamicamente -->
            </div>

            <div class="mt-6 p-5 bg-blue-900/40 border-2 border-blue-500/40 rounded-xl">
                <p class="text-blue-100 text-center text-lg">
                    ‚ÑπÔ∏è <strong>Todos os pacotes incluem:</strong> Motorista profissional experiente, ve√≠culo confort√°vel e com ar-condicionado. Alimenta√ß√£o e ingressos n√£o inclusos. Valores a combinar conforme roteiro e necessidades.
                </p>
            </div>
        </div>
    </div>

    <!-- Conte√∫do Principal -->
    <div id="conteudoPrincipal" class="hidden max-w-7xl mx-auto space-y-8 fade-in">
        
        <!-- Header Premium -->
        <div class="glass rounded-3xl p-8 shadow-2xl animate-float border-2 border-purple-500/30">
            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="relative">
                    <div class="w-36 h-36 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 p-1 pulse-glow">
                        <div class="w-full h-full rounded-full bg-slate-900 flex items-center justify-center overflow-hidden">
                            <img id="fotoMotorista" src="" alt="Foto" class="w-full h-full object-cover hidden">
                            <span id="avatarPadrao" class="text-6xl">üë®‚Äçüíº</span>
                        </div>
                    </div>
                    <div class="absolute -bottom-2 -right-2 bg-green-500 w-10 h-10 rounded-full border-4 border-slate-900 flex items-center justify-center">
                        <span class="text-lg">‚úì</span>
                    </div>
                </div>
                
                <div class="flex-1 text-center md:text-left">
                    <h1 class="text-5xl font-bold text-white mb-2">Lucas Santos</h1>
                    <p class="text-2xl text-purple-300 mb-4">üöó Motorista Premium Profissional</p>
                    <div class="flex flex-wrap justify-center md:justify-start gap-3">
                        <span class="px-5 py-3 bg-purple-700/70 rounded-full text-base text-white font-semibold border border-purple-400/50">
                            <span class="star">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span> 5.0
                        </span>
                        <span class="px-5 py-3 bg-pink-700/70 rounded-full text-base text-white font-semibold border border-pink-400/50">
                            üèÜ 1.247 Corridas
                        </span>
                        <span class="px-5 py-3 bg-blue-700/70 rounded-full text-base text-white font-semibold border border-blue-400/50">
                            ‚úÖ Verificado
                        </span>
                    </div>
                </div>

                <div class="flex gap-3">
                    <button onclick="toggleTurismo()" class="px-6 py-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white rounded-xl font-bold transition-all duration-300 shadow-lg border border-cyan-400/50 text-lg">
                        üèñÔ∏è Turismo
                    </button>
                    <button onclick="toggleAdmin()" class="px-6 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white rounded-xl font-bold transition-all duration-300 shadow-lg border border-yellow-400/50 text-lg">
                        ‚öôÔ∏è Admin
                    </button>
                </div>
            </div>
        </div>

        <!-- Formul√°rio e Chat -->
        <div class="grid md:grid-cols-2 gap-6">
            <!-- Coluna Esquerda - Formul√°rio -->
            <div class="space-y-6">
                <div class="glass p-8 rounded-2xl border-2 border-purple-500/30 shadow-xl">
                    <h2 class="text-3xl font-bold text-white mb-6 flex items-center gap-3">
                        üó∫Ô∏è Planejar Viagem
                    </h2>

                    <div class="glass p-6 rounded-2xl mb-5 border-2 border-purple-400/30">
                        <label class="block text-white font-bold mb-3 text-lg">üìç De onde voc√™ est√°?</label>
                        <div class="relative">
                            <input 
                                type="text" 
                                id="origem" 
                                placeholder="Digite o endere√ßo de origem..."
                                class="w-full px-5 py-4 rounded-xl bg-slate-800/90 border-2 border-purple-400/40 text-white placeholder-gray-400 focus:border-purple-500 focus:outline-none transition-all text-lg"
                                autocomplete="off"
                                oninput="buscarSugestoesOrigem(this.value)"
                            >
                            <div id="sugestoesOrigem" class="absolute w-full mt-2 glass rounded-xl overflow-hidden shadow-2xl z-50 hidden max-h-80 overflow-y-auto border-2 border-purple-400/40"></div>
                        </div>
                        <button 
                            onclick="obterLocalizacao()" 
                            class="mt-4 px-6 py-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white rounded-xl font-bold transition-all duration-300 shadow-lg w-full border border-cyan-400/50 text-lg"
                        >
                            üìç Usar Minha Localiza√ß√£o Atual
                        </button>
                        <div id="locationStatus" class="hidden"></div>
                    </div>

                    <div class="glass p-6 rounded-2xl mb-5 border-2 border-pink-400/30">
                        <label class="block text-white font-bold mb-3 text-lg">üéØ Para onde voc√™ vai?</label>
                        <div class="relative">
                            <input 
                                type="text" 
                                id="destino" 
                                placeholder="Ex: Jardim Camburi, Vit√≥ria - ES"
                                class="w-full px-5 py-4 rounded-xl bg-slate-800/90 border-2 border-pink-400/40 text-white placeholder-gray-400 focus:border-pink-500 focus:outline-none transition-all text-lg"
                                autocomplete="off"
                                oninput="buscarSugestoesDestino(this.value)"
                            >
                            <div id="sugestoesDestino" class="absolute w-full mt-2 glass rounded-xl overflow-hidden shadow-2xl z-50 hidden max-h-80 overflow-y-auto border-2 border-pink-400/40"></div>
                        </div>
                    </div>

                    <button 
                        onclick="calcularRota()" 
                        class="w-full px-8 py-5 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white text-xl font-bold rounded-2xl transition-all duration-300 shadow-2xl pulse-glow border-2 border-purple-400/50"
                    >
                        üíé Calcular Valor da Viagem
                    </button>

                    <div class="flex gap-3 mt-5">
                        <button 
                            onclick="abrirGoogleMaps()" 
                            class="flex-1 px-5 py-4 bg-gradient-to-r from-green-700 to-emerald-700 hover:from-green-800 hover:to-emerald-800 text-white rounded-xl font-bold transition-all duration-300 shadow-lg border border-green-400/50 text-lg"
                        >
                            üó∫Ô∏è Google Maps
                        </button>
                        <button 
                            onclick="abrirWaze()" 
                            class="flex-1 px-5 py-4 bg-gradient-to-r from-blue-700 to-cyan-700 hover:from-blue-800 hover:to-cyan-800 text-white rounded-xl font-bold transition-all duration-300 shadow-lg border border-blue-400/50 text-lg"
                        >
                            üöó Waze
                        </button>
                    </div>
                </div>

                <!-- Resultado do Pre√ßo -->
                <div id="resultadoPreco" class="hidden glass p-8 rounded-2xl space-y-5 border-2 border-purple-500/40 shadow-xl">
                    <h3 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-300 to-pink-300">
                        üíé Detalhes da Viagem
                    </h3>
                    
                    <div class="space-y-4">
                        <div class="flex justify-between items-center p-5 bg-slate-800/70 rounded-xl border-2 border-purple-400/30">
                            <span class="text-gray-100 font-bold text-lg">üìè Dist√¢ncia:</span>
                            <span id="distanciaTexto" class="text-2xl font-bold text-white loading-pulse">Calculando...</span>
                        </div>
                        
                        <div class="flex justify-between items-center p-5 bg-slate-800/70 rounded-xl border-2 border-purple-400/30">
                            <span id="taxaDescricao" class="text-gray-100 font-bold text-lg">üí∞ Valor por km:</span>
                            <span id="valorKm" class="text-2xl font-bold text-white">R$ --</span>
                        </div>
                        
                        <div class="flex justify-between items-center p-6 bg-gradient-to-r from-purple-700/50 to-pink-700/50 rounded-xl border-2 border-purple-400/60">
                            <span class="text-2xl font-bold text-white">üí≥ Valor Total:</span>
                            <span id="valorTotal" class="text-4xl font-bold text-green-300">R$ --</span>
                        </div>
                    </div>

                    <div class="bg-blue-900/50 border-2 border-blue-400/40 rounded-xl p-5 mt-4">
                        <p class="text-blue-100 text-base">
                            ‚ÑπÔ∏è <strong>Informa√ß√£o:</strong> Valores dentro do Esp√≠rito Santo: R$ 3,00/km. Viagens para outros estados ou sa√≠da de Viana: R$ 4,00/km. Pagamento direto ao motorista ou PIX.
                        </p>
                    </div>
                </div>

                <!-- Pagamento PIX -->
                <div id="secaoPagamento" class="hidden glass p-8 rounded-2xl space-y-5 border-2 border-green-500/40 shadow-xl">
                    <h3 class="text-3xl font-bold text-white mb-4">üí≥ Op√ß√£o de Pagamento PIX</h3>
                    
                    <div class="bg-green-900/50 border-2 border-green-400/40 rounded-xl p-6">
                        <p class="text-green-100 mb-4 font-bold text-lg">
                            <strong>Chave PIX (CPF):</strong>
                        </p>
                        <div class="flex gap-3">
                            <input 
                                type="text" 
                                value="147.122.587-99" 
                                readonly 
                                class="flex-1 px-5 py-4 bg-slate-800/90 border-2 border-green-400/40 rounded-lg text-white font-mono text-xl"
                            >
                            <button 
                                onclick="copiarPix()" 
                                class="px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg font-bold transition-all border border-green-400/50 text-lg"
                            >
                                üìã Copiar
                            </button>
                        </div>
                        <p class="text-base text-gray-100 mt-4 font-bold">
                            üí∞ Valor: <span id="valorPagamento" class="font-bold text-green-300 text-xl">R$ --</span>
                        </p>
                    </div>

                    <button 
                        onclick="confirmarPagamento()" 
                        class="w-full px-8 py-5 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white text-xl font-bold rounded-xl transition-all shadow-lg border-2 border-green-400/50"
                    >
                        ‚úÖ Confirmar Pagamento PIX
                    </button>
                </div>

                <!-- Bot√£o WhatsApp -->
                <button 
                    id="btnWhatsApp"
                    onclick="enviarWhatsApp()" 
                    class="hidden w-full px-8 py-6 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white text-2xl font-bold rounded-2xl transition-all duration-300 shadow-2xl border-2 border-green-400/50 pulse-glow"
                >
                    üì± Solicitar Corrida via WhatsApp
                </button>
            </div>

            <!-- Coluna Direita - Chat e Stats -->
            <div class="space-y-6">
                <!-- Chat -->
                <div class="glass p-8 rounded-2xl border-2 border-purple-500/30 shadow-xl">
                    <h3 class="text-3xl font-bold text-white mb-5">üí¨ Chat ao Vivo</h3>
                    <div id="chatMessages" class="space-y-3 mb-5">
                        <div class="p-5 rounded-2xl max-w-md glass border-2 border-purple-400/30">
                            <span class="text-white text-base">üë®‚Äçüíº Ol√°! Sou o Lucas Santos, seu motorista premium. Como posso ajudar?</span>
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <input 
                            type="text" 
                            id="mensagemInput" 
                            placeholder="Digite sua mensagem..."
                            class="flex-1 px-5 py-4 rounded-xl bg-slate-800/90 border-2 border-purple-400/40 text-white placeholder-gray-400 focus:border-purple-500 focus:outline-none text-lg"
                            onkeypress="if(event.key === 'Enter') enviarMensagem()"
                        >
                        <button 
                            onclick="enviarMensagem()" 
                            class="px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-xl font-bold transition-all border border-purple-400/50 text-2xl"
                        >
                            üì§
                        </button>
                    </div>
                </div>

                <!-- Estat√≠sticas -->
                <div class="glass p-8 rounded-2xl border-2 border-purple-500/30 shadow-xl">
                    <h3 class="text-3xl font-bold text-white mb-5">üìä Estat√≠sticas</h3>
                    <div class="grid grid-cols-2 gap-5 mb-6">
                        <div class="glass p-6 rounded-xl text-center border-2 border-purple-400/30">
                            <div class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-300 to-pink-300">
                                <span id="visitantesHoje">0</span>
                            </div>
                            <div class="text-base text-gray-100 mt-2 font-bold">üë• Hoje</div>
                        </div>
                        <div class="glass p-6 rounded-xl text-center border-2 border-blue-400/30">
                            <div class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-cyan-300">
                                <span id="visitantesMes">0</span>
                            </div>
                            <div class="text-base text-gray-100 mt-2 font-bold">üìÖ Este M√™s</div>
                        </div>
                        <div class="glass p-6 rounded-xl text-center border-2 border-green-400/30">
                            <div class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-300 to-emerald-300">
                                <span id="totalVisitantes">0</span>
                            </div>
                            <div class="text-base text-gray-100 mt-2 font-bold">üåü Total</div>
                        </div>
                        <div class="glass p-6 rounded-xl text-center border-2 border-yellow-400/30">
                            <div class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-orange-300">
                                <span id="recordeDia">0</span>
                            </div>
                            <div class="text-base text-gray-100 mt-2 font-bold">üèÜ Recorde/Dia</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Modal Admin -->
    <div id="adminModal" class="hidden fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4">
        <div class="glass p-8 rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-yellow-500/50">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-4xl font-bold text-white">‚öôÔ∏è Painel Administrativo</h2>
                <button onclick="toggleAdmin()" class="text-white text-3xl hover:text-red-400 transition-colors">
                    ‚úñÔ∏è
                </button>
            </div>

            <div class="space-y-6">
                <div class="glass p-6 rounded-2xl border-2 border-purple-500/40">
                    <h3 class="text-2xl font-bold text-white mb-4">üì∏ Atualizar Foto do Perfil</h3>
                    <input 
                        type="file" 
                        id="uploadFoto" 
                        accept="image/*" 
                        class="w-full px-4 py-3 bg-slate-800/90 border-2 border-purple-400/40 text-white rounded-xl file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white hover:file:bg-purple-700"
                    >
                    <button 
                        onclick="atualizarFoto()" 
                        class="mt-4 w-full px-6 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-xl font-bold transition-all border border-purple-400/50 text-lg"
                    >
                        ‚úÖ Atualizar Foto
                    </button>
                </div>

                <div class="glass p-6 rounded-2xl border-2 border-cyan-500/40">
                    <h3 class="text-2xl font-bold text-white mb-4">üèñÔ∏è Gerenciar Pacotes de Turismo</h3>
                    
                    <div class="space-y-4 mb-6">
                        <div class="grid md:grid-cols-2 gap-4">
                            <input 
                                type="text" 
                                id="nomePacote" 
                                placeholder="Nome do Pacote"
                                class="w-full px-4 py-3 bg-slate-800/90 border-2 border-cyan-400/40 text-white placeholder-gray-400 rounded-xl focus:border-cyan-500 focus:outline-none"
                            >
                            <input 
                                type="text" 
                                id="iconePacote" 
                                placeholder="√çcone (emoji)"
                                class="w-full px-4 py-3 bg-slate-800/90 border-2 border-cyan-400/40 text-white placeholder-gray-400 rounded-xl focus:border-cyan-500 focus:outline-none"
                            >
                        </div>
                        <textarea 
                            id="descricaoPacote" 
                            placeholder="Descri√ß√£o do pacote"
                            rows="3"
                            class="w-full px-4 py-3 bg-slate-800/90 border-2 border-cyan-400/40 text-white placeholder-gray-400 rounded-xl focus:border-cyan-500 focus:outline-none"
                        ></textarea>
                        <div class="grid md:grid-cols-3 gap-4">
                            <input 
                                type="text" 
                                id="duracaoPacote" 
                                placeholder="Dura√ß√£o (ex: 4-6 horas)"
                                class="w-full px-4 py-3 bg-slate-800/90 border-2 border-cyan-400/40 text-white placeholder-gray-400 rounded-xl focus:border-cyan-500 focus:outline-none"
                            >
                            <input 
                                type="text" 
                                id="capacidadePacote" 
                                placeholder="Capacidade"
                                class="w-full px-4 py-3 bg-slate-800/90 border-2 border-cyan-400/40 text-white placeholder-gray-400 rounded-xl focus:border-cyan-500 focus:outline-none"
                            >
                            <input 
                                type="text" 
                                id="valorPacote" 
                                placeholder="Valor (opcional)"
                                class="w-full px-4 py-3 bg-slate-800/90 border-2 border-cyan-400/40 text-white placeholder-gray-400 rounded-xl focus:border-cyan-500 focus:outline-none"
                            >
                        </div>
                        <input 
                            type="text" 
                            id="locaisPacote" 
                            placeholder="Locais inclusos"
                            class="w-full px-4 py-3 bg-slate-800/90 border-2 border-cyan-400/40 text-white placeholder-gray-400 rounded-xl focus:border-cyan-500 focus:outline-none"
                        >
                        <input 
                            type="text" 
                            id="corPacote" 
                            placeholder="Cor (cyan, green, orange, purple, pink, blue)"
                            class="w-full px-4 py-3 bg-slate-800/90 border-2 border-cyan-400/40 text-white placeholder-gray-400 rounded-xl focus:border-cyan-500 focus:outline-none"
                        >
                    </div>
                    
                    <button 
                        onclick="adicionarPacote()" 
                        class="w-full px-6 py-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white rounded-xl font-bold transition-all border border-cyan-400/50 text-lg mb-4"
                    >
                        ‚ûï Adicionar Pacote
                    </button>

                    <div class="mt-6">
                        <h4 class="text-xl font-bold text-white mb-3">üìã Pacotes Cadastrados</h4>
                        <div id="listaPacotesAdmin" class="space-y-3 max-h-80 overflow-y-auto">
                            <!-- Pacotes ser√£o listados aqui -->
                        </div>
                    </div>
                </div>

                <div class="glass p-6 rounded-2xl border-2 border-green-500/40">
                    <h3 class="text-2xl font-bold text-white mb-4">üìä Visitantes Registrados</h3>
                    <div id="listaVisitantesAdmin" class="space-y-3 max-h-96 overflow-y-auto">
                        <div class="text-gray-300 text-center p-4">Nenhum visitante registrado</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let latOrigem = null;
        let lngOrigem = null;
        let origemAtual = '';
        let destinoAtual = '';
        let distanciaCalculada = 0;
        let valorTotalCalculado = 0;
        let timeoutSugestaoOrigem = null;
        let timeoutSugestaoDestino = null;

        // Pacotes de turismo padr√£o
        const pacotesPadrao = [
            {
                icone: 'üèñÔ∏è',
                nome: 'Praias da Grande Vit√≥ria',
                descricao: 'Conhe√ßa as melhores praias: Camburi, Curva da Jurema, Praia da Costa, Praia de Itaparica e muito mais!',
                duracao: '4-6 horas',
                capacidade: 'At√© 4 pessoas',
                locais: 'Jardim Camburi, Praia da Costa, Curva da Jurema',
                valor: 'A combinar',
                cor: 'cyan'
            },
            {
                icone: 'üèîÔ∏è',
                nome: 'Serra Capixaba',
                descricao: 'Explore Domingos Martins, Venda Nova do Imigrante, Pedra Azul e toda a beleza das montanhas capixabas!',
                duracao: '8-10 horas',
                capacidade: 'At√© 4 pessoas',
                locais: 'Domingos Martins, Venda Nova, Pedra Azul',
                valor: 'A combinar',
                cor: 'green'
            },
            {
                icone: 'üê¢',
                nome: 'Guarapari e Anchieta',
                descricao: 'Praias paradis√≠acas, areia monaz√≠tica terap√™utica, Santu√°rio de Anchieta e pontos tur√≠sticos incr√≠veis!',
                duracao: '6-8 horas',
                capacidade: 'At√© 4 pessoas',
                locais: 'Guarapari, Anchieta, Iriri, Ubu',
                valor: 'A combinar',
                cor: 'orange'
            },
            {
                icone: 'üé®',
                nome: 'City Tour Vit√≥ria',
                descricao: 'Centro hist√≥rico, Convento da Penha, Pal√°cio Anchieta, Teatro Carlos Gomes e muito mais!',
                duracao: '3-4 horas',
                capacidade: 'At√© 4 pessoas',
                locais: 'Centro, Convento da Penha, Vila Velha',
                valor: 'A combinar',
                cor: 'purple'
            },
            {
                icone: 'üèä',
                nome: 'Trilha Piscinas Naturais',
                descricao: 'Aventura pelas bel√≠ssimas piscinas naturais, paisagens deslumbrantes e √°guas cristalinas!',
                duracao: '5-7 horas',
                capacidade: 'At√© 4 pessoas',
                locais: 'Piscinas Naturais, Trilhas Ecol√≥gicas',
                valor: 'A combinar',
                cor: 'blue'
            },
            {
                icone: 'ü¶é',
                nome: 'Rota do Lagarto',
                descricao: 'Conhe√ßa a famosa Rota do Lagarto com suas paisagens √∫nicas e biodiversidade incr√≠vel!',
                duracao: '4-6 horas',
                capacidade: 'At√© 4 pessoas',
                locais: 'Rota do Lagarto, Mirantes Naturais',
                valor: 'A combinar',
                cor: 'green'
            },
            {
                icone: 'üôè',
                nome: 'Rota do Buda',
                descricao: 'Visite o famoso monast√©rio budista, jardins zen e locais de medita√ß√£o e paz espiritual!',
                duracao: '3-5 horas',
                capacidade: 'At√© 4 pessoas',
                locais: 'Monast√©rio Zen Morro da Vargem',
                valor: 'A combinar',
                cor: 'pink'
            },
            {
                icone: 'üå¥',
                nome: 'Coqueiral de Aracruz',
                descricao: 'Explore o belo coqueiral, praias paradis√≠acas e a rica cultura local de Aracruz!',
                duracao: '6-8 horas',
                capacidade: 'At√© 4 pessoas',
                locais: 'Coqueiral, Praias de Aracruz, Centro Hist√≥rico',
                valor: 'A combinar',
                cor: 'cyan'
            }
        ];

        function inicializarPacotes() {
            if (!localStorage.getItem('pacotesTurismo')) {
                localStorage.setItem('pacotesTurismo', JSON.stringify(pacotesPadrao));
            }
            carregarPacotesTurismo();
        }

        function carregarPacotesTurismo() {
            const pacotes = JSON.parse(localStorage.getItem('pacotesTurismo') || '[]');
            const container = document.getElementById('pacotesTurismo');
            const containerAdmin = document.getElementById('listaPacotesAdmin');
            
            container.innerHTML = '';
            containerAdmin.innerHTML = '';

            pacotes.forEach((pacote, index) => {
                // Card para modal de turismo
                const cardTurismo = document.createElement('div');
                cardTurismo.className = `glass p-6 rounded-2xl border-2 border-${pacote.cor}-500/40 hover:border-${pacote.cor}-500/70 transition-all hover:scale-105 duration-300`;
                cardTurismo.innerHTML = `
                    <div class="text-5xl mb-4">${pacote.icone}</div>
                    <h3 class="text-2xl font-bold text-${pacote.cor}-300 mb-3">${pacote.nome}</h3>
                    <p class="text-gray-200 mb-4 text-lg">${pacote.descricao}</p>
                    <div class="space-y-2 mb-4">
                        <p class="text-white text-lg">‚è±Ô∏è <strong>Dura√ß√£o:</strong> ${pacote.duracao}</p>
                        <p class="text-white text-lg">üë• <strong>Capacidade:</strong> ${pacote.capacidade}</p>
                        <p class="text-white text-lg">üìç <strong>Locais:</strong> ${pacote.locais}</p>
                        <p class="text-green-300 font-bold text-2xl mt-3">üí∞ ${pacote.valor}</p>
                    </div>
                    <button onclick="solicitarTurismo('${pacote.nome}', '${pacote.valor}')" class="w-full px-4 py-3 bg-gradient-to-r from-${pacote.cor}-600 to-blue-600 hover:from-${pacote.cor}-700 hover:to-blue-700 text-white rounded-xl font-semibold transition-all text-lg">
                        üì± Solicitar via WhatsApp
                    </button>
                `;
                container.appendChild(cardTurismo);

                // Card para admin
                const cardAdmin = document.createElement('div');
                cardAdmin.className = 'glass p-4 rounded-xl border-2 border-cyan-400/30 flex justify-between items-center';
                cardAdmin.innerHTML = `
                    <div class="flex-1">
                        <div class="text-2xl mb-2">${pacote.icone} <span class="text-white font-bold">${pacote.nome}</span></div>
                        <div class="text-sm text-gray-300">Valor: ${pacote.valor}</div>
                    </div>
                    <button onclick="removerPacote(${index})" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold transition-all">
                        üóëÔ∏è
                    </button>
                `;
                containerAdmin.appendChild(cardAdmin);
            });
        }

        function adicionarPacote() {
            const nome = document.getElementById('nomePacote').value.trim();
            const icone = document.getElementById('iconePacote').value.trim();
            const descricao = document.getElementById('descricaoPacote').value.trim();
            const duracao = document.getElementById('duracaoPacote').value.trim();
            const capacidade = document.getElementById('capacidadePacote').value.trim();
            const valor = document.getElementById('valorPacote').value.trim() || 'A combinar';
            const locais = document.getElementById('locaisPacote').value.trim();
            const cor = document.getElementById('corPacote').value.trim() || 'purple';

            if (!nome || !icone || !descricao || !duracao || !capacidade || !locais) {
                alert('‚ö†Ô∏è Preencha todos os campos obrigat√≥rios!');
                return;
            }

            const pacotes = JSON.parse(localStorage.getItem('pacotesTurismo') || '[]');
            pacotes.push({ nome, icone, descricao, duracao, capacidade, valor, locais, cor });
            localStorage.setItem('pacotesTurismo', JSON.stringify(pacotes));

            document.getElementById('nomePacote').value = '';
            document.getElementById('iconePacote').value = '';
            document.getElementById('descricaoPacote').value = '';
            document.getElementById('duracaoPacote').value = '';
            document.getElementById('capacidadePacote').value = '';
            document.getElementById('valorPacote').value = '';
            document.getElementById('locaisPacote').value = '';
            document.getElementById('corPacote').value = '';

            alert('‚úÖ Pacote adicionado com sucesso!');
            carregarPacotesTurismo();
        }

        function removerPacote(index) {
            if (!confirm('Deseja realmente remover este pacote?')) return;
            
            const pacotes = JSON.parse(localStorage.getItem('pacotesTurismo') || '[]');
            pacotes.splice(index, 1);
            localStorage.setItem('pacotesTurismo', JSON.stringify(pacotes));
            
            alert('‚úÖ Pacote removido com sucesso!');
            carregarPacotesTurismo();
        }

        function entrarNoSite() {
            const nome = document.getElementById('nomeIdentificacao').value.trim();
            const cpf = document.getElementById('cpfIdentificacao').value.trim();
            const telefone = document.getElementById('telefoneIdentificacao').value.trim();

            if (!nome || !cpf || !telefone) {
                alert('‚ö†Ô∏è Por favor, preencha todos os campos!');
                return;
            }

            if (cpf.replace(/\D/g, '').length < 11) {
                alert('‚ö†Ô∏è CPF inv√°lido! Digite um CPF v√°lido.');
                return;
            }

            if (telefone.replace(/\D/g, '').length < 10) {
                alert('‚ö†Ô∏è Telefone inv√°lido! Digite um telefone v√°lido com DDD.');
                return;
            }

            const visitantes = JSON.parse(localStorage.getItem('visitantes') || '[]');
            
            // Verifica se j√° existe registro deste CPF
            const visitanteExistente = visitantes.find(v => v.cpf === cpf);
            
            if (!visitanteExistente) {
                const novoVisitante = {
                    nome,
                    cpf,
                    telefone,
                    primeiroAcesso: new Date().toLocaleString('pt-BR'),
                    acessos: [new Date().toLocaleString('pt-BR')]
                };
                visitantes.push(novoVisitante);
            } else {
                // Adiciona novo acesso ao visitante existente
                visitanteExistente.acessos.push(new Date().toLocaleString('pt-BR'));
            }

            localStorage.setItem('visitantes', JSON.stringify(visitantes));

            document.getElementById('identificacaoModal').classList.add('hidden');
            document.getElementById('conteudoPrincipal').classList.remove('hidden');

            carregarDados();
        }

        function toggleTurismo() {
            document.getElementById('turismoModal').classList.toggle('hidden');
        }

        function solicitarTurismo(pacote, valor) {
            const mensagem = `üèñÔ∏è *Solicita√ß√£o de Pacote Tur√≠stico*

üì¶ *Pacote:* ${pacote}
üí∞ *Valor:* ${valor}
üë§ *Motorista:* Lucas Santos

---
üåü Servi√ßo Premium de Turismo
‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Avalia√ß√£o 5 Estrelas | 1.247 corridas`;

            const url = `https://wa.me/5527988668504?text=${encodeURIComponent(mensagem)}`;
            window.open(url, '_blank');
        }

        function carregarDados() {
            const fotoSalva = localStorage.getItem('fotoMotorista');
            if (fotoSalva) {
                document.getElementById('fotoMotorista').src = fotoSalva;
                document.getElementById('fotoMotorista').classList.remove('hidden');
                document.getElementById('avatarPadrao').classList.add('hidden');
            }

            const visitantes = JSON.parse(localStorage.getItem('visitantes') || '[]');
            const hoje = new Date().toLocaleDateString('pt-BR');
            const mesAtual = new Date().getMonth();
            const anoAtual = new Date().getFullYear();

            // Visitantes de hoje
            const visitantesHoje = visitantes.filter(v => 
                v.acessos.some(a => a.startsWith(hoje))
            ).length;

            // Visitantes do m√™s
            const visitantesMes = visitantes.filter(v => 
                v.acessos.some(a => {
                    const dataAcesso = new Date(a.split(', ')[0].split('/').reverse().join('-'));
                    return dataAcesso.getMonth() === mesAtual && dataAcesso.getFullYear() === anoAtual;
                })
            ).length;

            // Total de visitantes
            const totalVisitantes = visitantes.length;

            // Recorde de visitantes em um dia
            const visitantesPorDia = {};
            visitantes.forEach(v => {
                v.acessos.forEach(a => {
                    const dia = a.split(',')[0];
                    visitantesPorDia[dia] = (visitantesPorDia[dia] || 0) + 1;
                });
            });
            const recordeDia = Math.max(...Object.values(visitantesPorDia), 0);

            document.getElementById('visitantesHoje').textContent = visitantesHoje;
            document.getElementById('visitantesMes').textContent = visitantesMes;
            document.getElementById('totalVisitantes').textContent = totalVisitantes;
            document.getElementById('recordeDia').textContent = recordeDia;

            // Atualizar lista de visitantes no admin
            const listaAdmin = document.getElementById('listaVisitantesAdmin');
            listaAdmin.innerHTML = '';
            
            visitantes.slice().reverse().forEach(v => {
                const div = document.createElement('div');
                div.className = 'glass p-4 rounded-lg border-2 border-green-400/30';
                div.innerHTML = `
                    <div class="font-bold text-white text-lg">${v.nome}</div>
                    <div class="text-sm text-gray-200 mt-1">CPF: ${v.cpf} | Tel: ${v.telefone}</div>
                    <div class="text-xs text-gray-300 mt-1">Primeiro acesso: ${v.primeiroAcesso}</div>
                    <div class="text-xs text-gray-300">Total de acessos: ${v.acessos.length}</div>
                    <div class="text-xs text-gray-400 mt-1">√öltimo acesso: ${v.acessos[v.acessos.length - 1]}</div>
                `;
                listaAdmin.appendChild(div);
            });

            if (visitantes.length === 0) {
                listaAdmin.innerHTML = '<div class="text-gray-300 text-center p-4">Nenhum visitante registrado</div>';
            }
        }

        function toggleAdmin() {
            const senha = prompt('Digite a senha de administrador:');
            if (senha !== '785623') {
                alert('‚ùå Senha incorreta!');
                return;
            }
            document.getElementById('adminModal').classList.toggle('hidden');
            carregarPacotesTurismo();
            carregarDados();
        }

        function atualizarFoto() {
            const input = document.getElementById('uploadFoto');
            const file = input.files[0];
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const foto = document.getElementById('fotoMotorista');
                    const avatar = document.getElementById('avatarPadrao');
                    foto.src = e.target.result;
                    foto.classList.remove('hidden');
                    avatar.classList.add('hidden');
                    
                    localStorage.setItem('fotoMotorista', e.target.result);
                    alert('‚úÖ Foto atualizada com sucesso!');
                };
                reader.readAsDataURL(file);
            } else {
                alert('‚ùå Selecione uma foto primeiro!');
            }
        }

        function obterLocalizacao() {
            const status = document.getElementById('locationStatus');
            const origemInput = document.getElementById('origem');
            status.classList.remove('hidden');
            status.className = 'mt-4 p-4 glass rounded-lg text-base text-cyan-200 border-2 border-cyan-400/40';
            status.textContent = 'üîÑ Obtendo sua localiza√ß√£o...';
            
            if (!navigator.geolocation) {
                status.className = 'mt-4 p-4 glass rounded-lg text-base text-red-200 border-2 border-red-400/40';
                status.textContent = '‚ùå Geolocaliza√ß√£o n√£o suportada pelo navegador';
                return;
            }

            navigator.geolocation.getCurrentPosition(
                async (position) => {
                    latOrigem = position.coords.latitude;
                    lngOrigem = position.coords.longitude;
                    
                    status.textContent = 'üîÑ Buscando endere√ßo...';
                    
                    try {
                        const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latOrigem}&lon=${lngOrigem}&accept-language=pt-BR`);
                        const data = await response.json();
                        
                        const endereco = data.address;
                        let enderecoFormatado = '';
                        
                        if (endereco.road) {
                            enderecoFormatado = endereco.road;
                            if (endereco.house_number) enderecoFormatado += ', ' + endereco.house_number;
                            if (endereco.suburb || endereco.neighbourhood) enderecoFormatado += ' - ' + (endereco.suburb || endereco.neighbourhood);
                            if (endereco.city || endereco.town) enderecoFormatado += ', ' + (endereco.city || endereco.town);
                            if (endereco.state) enderecoFormatado += ' - ' + endereco.state;
                        } else {
                            enderecoFormatado = data.display_name;
                        }
                        
                        origemInput.value = enderecoFormatado;
                        status.className = 'mt-4 p-4 glass rounded-lg text-base text-green-200 border-2 border-green-400/40';
                        status.textContent = '‚úÖ Localiza√ß√£o obtida: ' + enderecoFormatado;
                        setTimeout(() => status.classList.add('hidden'), 5000);
                    } catch (error) {
                        origemInput.value = `${latOrigem.toFixed(6)}, ${lngOrigem.toFixed(6)}`;
                        status.className = 'mt-4 p-4 glass rounded-lg text-base text-yellow-200 border-2 border-yellow-400/40';
                        status.textContent = '‚ö†Ô∏è Localiza√ß√£o obtida (coordenadas)';
                        setTimeout(() => status.classList.add('hidden'), 3000);
                    }
                },
                (error) => {
                    status.className = 'mt-4 p-4 glass rounded-lg text-base text-red-200 border-2 border-red-400/40';
                    status.textContent = '‚ùå Erro ao obter localiza√ß√£o. Ative a permiss√£o no navegador.';
                }
            );
        }

        function abrirGoogleMaps() {
            const destino = document.getElementById('destino').value;
            const origem = document.getElementById('origem').value;
            
            if (!destino) {
                alert('‚ùå Digite o endere√ßo de destino primeiro!');
                return;
            }
            
            let url;
            
            if (latOrigem && lngOrigem) {
                url = `https://www.google.com/maps/dir/${latOrigem},${lngOrigem}/${encodeURIComponent(destino)}`;
            } else if (origem && origem.trim() !== '') {
                url = `https://www.google.com/maps/dir/${encodeURIComponent(origem)}/${encodeURIComponent(destino)}`;
            } else {
                url = `https://www.google.com/maps/search/${encodeURIComponent(destino)}`;
            }
            
            window.open(url, '_blank');
        }

        function abrirWaze() {
            const destino = document.getElementById('destino').value;
            const origem = document.getElementById('origem').value;
            
            if (!destino) {
                alert('‚ùå Digite o endere√ßo de destino primeiro!');
                return;
            }
            
            let url;
            
            if (latOrigem && lngOrigem) {
                url = `https://waze.com/ul?ll=${latOrigem},${lngOrigem}&navigate=yes&q=${encodeURIComponent(destino)}`;
            } else if (origem && origem.trim() !== '') {
                url = `https://waze.com/ul?q=${encodeURIComponent(destino)}&navigate=yes`;
            } else {
                url = `https://waze.com/ul?q=${encodeURIComponent(destino)}`;
            }
            
            window.open(url, '_blank');
        }

        async function calcularRota() {
            const origem = document.getElementById('origem').value;
            const destino = document.getElementById('destino').value;

            if (!origem || !destino) {
                alert('‚ö†Ô∏è Por favor, preencha origem e destino!');
                return;
            }

            origemAtual = origem;
            destinoAtual = destino;

            document.getElementById('resultadoPreco').classList.remove('hidden');
            document.getElementById('distanciaTexto').textContent = 'Calculando...';
            document.getElementById('distanciaTexto').classList.add('loading-pulse');
            document.getElementById('valorTotal').textContent = 'R$ --';

            try {
                const origemCoords = await geocodificar(origem);
                const destinoCoords = await geocodificar(destino);

                if (!origemCoords || !destinoCoords) {
                    throw new Error('N√£o foi poss√≠vel localizar os endere√ßos');
                }

                const response = await fetch(
                    `https://router.project-osrm.org/route/v1/driving/${origemCoords.lon},${origemCoords.lat};${destinoCoords.lon},${destinoCoords.lat}?overview=false`
                );
                const data = await response.json();

                if (data.code !== 'Ok') {
                    throw new Error('N√£o foi poss√≠vel calcular a rota');
                }

                const distanciaMetros = data.routes[0].distance;
                const km = Math.round(distanciaMetros / 1000);

                const estadoOrigem = await obterEstado(origemCoords.lat, origemCoords.lon);
                const estadoDestino = await obterEstado(destinoCoords.lat, destinoCoords.lon);
                
                // Verifica se a origem √© regi√£o de Viana
                const origemViana = await verificarViana(origemCoords.lat, origemCoords.lon);
                
                const foraDoES = estadoOrigem !== 'Esp√≠rito Santo' || estadoDestino !== 'Esp√≠rito Santo';
                const valorPorKm = (foraDoES || origemViana) ? 4.00 : 3.00;

                const total = km * valorPorKm;

                distanciaCalculada = km;
                valorTotalCalculado = total;

                document.getElementById('distanciaTexto').classList.remove('loading-pulse');
                document.getElementById('distanciaTexto').textContent = km + ' km';
                
                let tipoViagem = 'Esp√≠rito Santo';
                if (origemViana) {
                    tipoViagem = 'Sa√≠da regi√£o de Viana';
                } else if (foraDoES) {
                    tipoViagem = 'Fora do Esp√≠rito Santo';
                }
                
                document.getElementById('taxaDescricao').textContent = (foraDoES || origemViana)
                    ? 'üí∞ Valor por km: R$ 4,00/km' 
                    : 'üí∞ Valor por km (ES): R$ 3,00/km';
                document.getElementById('valorKm').textContent = 'R$ ' + (km * valorPorKm).toFixed(2);
                document.getElementById('valorTotal').textContent = 'R$ ' + total.toFixed(2);
                document.getElementById('valorPagamento').textContent = 'R$ ' + total.toFixed(2);
                document.getElementById('secaoPagamento').classList.remove('hidden');
                document.getElementById('btnWhatsApp').classList.remove('hidden');

                adicionarMensagemChat('driver', `‚úÖ Rota calculada! Dist√¢ncia: ${km} km (${tipoViagem}). Valor: R$ ${total.toFixed(2)} (R$ ${valorPorKm.toFixed(2)}/km). Pagamento direto ao motorista ou via PIX.`);
            } catch (error) {
                document.getElementById('distanciaTexto').classList.remove('loading-pulse');
                alert('‚ùå Erro ao calcular rota. Verifique os endere√ßos e tente novamente.');
                document.getElementById('resultadoPreco').classList.add('hidden');
            }
        }

        async function geocodificar(endereco) {
            try {
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(endereco)}&limit=1&accept-language=pt-BR`
                );
                const data = await response.json();
                if (data && data.length > 0) {
                    return {
                        lat: parseFloat(data[0].lat),
                        lon: parseFloat(data[0].lon)
                    };
                }
                return null;
            } catch (error) {
                return null;
            }
        }

        async function obterEstado(lat, lon) {
            try {
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&accept-language=pt-BR`
                );
                const data = await response.json();
                return data.address?.state || '';
            } catch (error) {
                return '';
            }
        }

        async function verificarViana(lat, lon) {
            try {
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&accept-language=pt-BR`
                );
                const data = await response.json();
                const cidade = data.address?.city || data.address?.town || data.address?.municipality || '';
                return cidade.toLowerCase().includes('viana');
            } catch (error) {
                return false;
            }
        }

        function copiarPix() {
            const chavePix = '14712258799';
            navigator.clipboard.writeText(chavePix).then(() => {
                alert('‚úÖ Chave PIX copiada com sucesso!\n\nüìã ' + chavePix);
            }).catch(() => {
                alert('üìã Chave PIX: ' + chavePix + '\n\nCopie manualmente esta chave.');
            });
        }

        function confirmarPagamento() {
            alert('‚úÖ Pagamento confirmado! Voc√™ pode enviar a solicita√ß√£o pelo WhatsApp agora.');
            document.getElementById('secaoPagamento').style.opacity = '0.6';
            adicionarMensagemChat('driver', '‚úÖ Pagamento PIX confirmado! Obrigado pela prefer√™ncia.');
        }

        function enviarMensagem() {
            const input = document.getElementById('mensagemInput');
            const mensagem = input.value.trim();
            
            if (!mensagem) return;

            adicionarMensagemChat('user', mensagem);
            input.value = '';

            setTimeout(() => {
                adicionarMensagemChat('driver', '‚úÖ Mensagem recebida! Para solicitar uma corrida, use o formul√°rio acima e calcule o valor.');
            }, 500);
        }

        function enviarWhatsApp() {
            const pagamentoPix = document.getElementById('secaoPagamento').style.opacity === '0.6' ? 'Sim' : 'N√£o confirmado';
            
            const mensagem = `üöó *Nova Solicita√ß√£o de Corrida Premium*

üë§ *Motorista:* Lucas Santos
üìç *Origem:* ${origemAtual}
üéØ *Destino:* ${destinoAtual}
üìè *Dist√¢ncia:* ${distanciaCalculada} km
üí∞ *Valor:* R$ ${valorTotalCalculado.toFixed(2)}

üí≥ *Pagamento PIX antecipado:* ${pagamentoPix}
${pagamentoPix === 'Sim' ? '‚úÖ Chave PIX: 147.122.587-99' : 'üíµ Pagamento direto ao motorista'}

---
üåü Servi√ßo Premium de Transporte
‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Avalia√ß√£o 5 Estrelas | 1.247 corridas realizadas`;

            const url = `https://wa.me/5527988668504?text=${encodeURIComponent(mensagem)}`;
            window.open(url, '_blank');
            
            adicionarMensagemChat('driver', '‚úÖ Redirecionando para WhatsApp... Aguarde o contato do motorista Lucas Santos!');
        }

        function adicionarMensagemChat(tipo, texto) {
            const chat = document.getElementById('chatMessages');
            const div = document.createElement('div');
            div.className = tipo === 'user' 
                ? 'p-4 rounded-2xl max-w-md bg-gradient-to-r from-purple-600 to-pink-600 text-white ml-auto text-right border-2 border-purple-400/40 shadow-lg' 
                : 'p-4 rounded-2xl max-w-md glass border-2 border-purple-400/30';
            div.innerHTML = `<span class="text-white text-base">${tipo === 'user' ? 'üë§ ' : 'üë®‚Äçüíº '}${texto}</span>`;
            chat.appendChild(div);
            chat.scrollTop = chat.scrollHeight;
        }

        function buscarSugestoesOrigem(valor) {
            clearTimeout(timeoutSugestaoOrigem);
            
            if (valor.length < 3) {
                document.getElementById('sugestoesOrigem').classList.add('hidden');
                return;
            }

            timeoutSugestaoOrigem = setTimeout(async () => {
                await buscarSugestoes(valor, 'sugestoesOrigem', 'origem');
            }, 500);
        }

        function buscarSugestoesDestino(valor) {
            clearTimeout(timeoutSugestaoDestino);
            
            if (valor.length < 3) {
                document.getElementById('sugestoesDestino').classList.add('hidden');
                return;
            }

            timeoutSugestaoDestino = setTimeout(async () => {
                await buscarSugestoes(valor, 'sugestoesDestino', 'destino');
            }, 500);
        }

        async function buscarSugestoes(query, elementoId, inputId) {
            try {
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&accept-language=pt-BR&countrycodes=br`
                );
                const resultados = await response.json();

                const container = document.getElementById(elementoId);
                container.innerHTML = '';

                if (resultados.length === 0) {
                    container.classList.add('hidden');
                    return;
                }

                resultados.forEach(resultado => {
                    const div = document.createElement('div');
                    div.className = 'suggestion-item px-5 py-4 hover:bg-white/20 cursor-pointer transition-all border-b border-white/10 last:border-0';
                    
                    const endereco = resultado.display_name;
                    const icone = resultado.type === 'city' || resultado.type === 'town' ? 'üèôÔ∏è' : 
                                  resultado.type === 'suburb' || resultado.type === 'neighbourhood' ? 'üèòÔ∏è' : 'üìç';
                    
                    div.innerHTML = `
                        <div class="flex items-start gap-3">
                            <span class="text-2xl">${icone}</span>
                            <div class="flex-1">
                                <div class="text-white font-bold text-base">${endereco.split(',')[0]}</div>
                                <div class="text-gray-200 text-sm mt-1">${endereco}</div>
                            </div>
                        </div>
                    `;
                    
                    div.onclick = () => {
                        document.getElementById(inputId).value = endereco;
                        container.classList.add('hidden');
                        
                        if (inputId === 'origem') {
                            latOrigem = parseFloat(resultado.lat);
                            lngOrigem = parseFloat(resultado.lon);
                        }
                    };
                    
                    container.appendChild(div);
                });

                container.classList.remove('hidden');
            } catch (error) {
                console.error('Erro ao buscar sugest√µes:', error);
            }
        }

        document.addEventListener('click', (e) => {
            if (!e.target.closest('#origem') && !e.target.closest('#sugestoesOrigem')) {
                document.getElementById('sugestoesOrigem').classList.add('hidden');
            }
            if (!e.target.closest('#destino') && !e.target.closest('#sugestoesDestino')) {
                document.getElementById('sugestoesDestino').classList.add('hidden');
            }
        });

        document.getElementById('cpfIdentificacao').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                e.target.value = value;
            }
        });

        document.getElementById('telefoneIdentificacao').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{2})(\d)/, '($1) $2');
                value = value.replace(/(\d{5})(\d)/, '$1-$2');
                e.target.value = value;
            }
        });

        // Inicializar pacotes de turismo ao carregar a p√°gina
        window.addEventListener('DOMContentLoaded', () => {
            inicializarPacotes();
        });
    </script>
</body>
</html>
